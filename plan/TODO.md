# プロジェクト To-Do リスト

このドキュメントは、`plan.md` およびステータスレポート（`status-2025-09-26.md` 〜 `status-2025-12-28.md`）から導き出された未完了タスクと今後の計画をまとめたものです。

## 1. 直近の課題 & UI/UX (優先度高)
- [x] **OHIF v3 Study List 検証**: Study Listが0件になる問題を調査し、UI設定（フィルター管理）を改善する。必要に応じて初期フィルターをリセットする仕組みを導入する。（`ohif/app-config.js` に自動クリア処理を追加）
- [x] **Requester UI アラート**: Requester UIのアラートをSlackやPagerDutyなどの外部サービスへ連携する設計と実装を行う（Workerの `copy-events` に基づく）。（`worker/alert-service.ts` 実装済み）

## 2. インフラ & セキュリティ (Worker/Gateway)
- [/] **リバースプロキシ & 認証統合**: リバースプロキシ（Nginx）および認証基盤（Keycloak等）と統合する。Worker APIへのJWT連携やロールベースアクセス制御（RBAC）を設計する。（Nginxプロキシを `docker-compose.yml` に追加済み）
- [ ] **Worker設定のセキュリティ**: 設定改竄対策（Provider署名、オンチェーン許可リスト、VPN/IP制限など）を実装する。
- [x] **Provider主導Worker（プッシュ型）**: Provider主導でWorkerを運用する場合の接続情報レジストリや署名検証の実装を検討する。（Workerの `orthanc` モードと `privateKey` 署名対応により自動化完了）
- [x] **ゲートウェイ監査ログ**: ゲートウェイ監査ログ（`gateway-audit.jsonl`）のローテーションと集中管理（ELK/SIEM連携）を実装する。（ローテーション機能を `worker/index.ts` に実装済み）
- [ ] **データ保護**: 転送中・保存中の暗号化や削除ポリシーを含む、エンドツーエンドのデータ保護対策を整備する。

## 3. CI/CD & 品質保証
- [ ] **CIパイプライン**: `npm run test`, `hardhat test`, `eslint` を自動実行するCIパイプラインを構築する。
- [ ] **自動テスト**: 新しいアクセス制御仕様のシーケンス図を追加し、自動テスト（ドキュメント + E2Eチェックリスト）を実装する。

## 4. 今後のロードマップ (plan.md M2/M3より)
- [ ] **Operatorセキュリティ**: Operator権限のマルチシグ化を実装し、権限境界を明確にする。
- [ ] **監査ログビュー**: 監査ログの集計ビューを作成する（オフチェーンDBの利用も検討）。
- [ ] **L2テストネット対応**: システムをL2テストネット（部署用RPC）デプロイに対応させる。
- [ ] **実環境連携**: 本物のPACSやIdP（OIDC）と連携する。
- [ ] **エコノミクス**: トークン、価格、返金ポリシー、期限、失効処理を定義する。

---
*2025-12-28までのステータス更新に基づいて生成されました。*
